<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        td {
            padding: 10px;
            background-color: crimson;
            color: white;
            border-radius: 3px;
        }

        p {
            margin-top: 120px;
            color: blue;
            font-size: 30px;
        }

        h4 {
            color: rgb(0, 0, 0);
        }

        tr {
            margin-bottom: 10px;
        }

        #table {
            display: grid;
            grid-template-columns: repeat(3, 180px);
        }
    </style>
</head>

<body>
    <div class="table-container">
        <div>
            <h4>New Image:</h4>
            <table id="table"></table>
        </div>
    </div>

    <div id="result"></div>

    <script>
        //change image, filter, m, n && increment index.
        const image = [
            73, 73, 73, 73, 73, 0, 0, 0, 0, 73, 73, 73, 73, 73, 0, 0, 0, 0, 73, 73, 73, 73, 73, 0, 0, 0, 0, 74, 74, 74, 57, 54, 3, 7, 7, 7, 47, 47, 47, 2, 72, 1, 99, 99, 99, 6, 6, 6, 27, 41, 2, 1, 1, 1, 72, 72, 72, 72, 54, 8, 205, 205, 205, 72, 72, 72, 72, 54, 8, 205, 205, 205, 72, 72, 72, 72, 54, 8, 205, 205, 205
        ];
        // const filter = [0.0625, 0.125, 0.0625, 0.125, 0.25, 0.125, 0.0625, 0.125, 0.0625]; 3*3 weighted avg filter
        const filter = [0.04, 0.04, 0.04, 0.04, 0.04, 0.04, 0.04, 0.04, 0.04, 0.04, 0.04, 0.04, 0.04, 0.04, 0.04, 0.04, 0.04, 0.04, 0.04, 0.04, 0.04, 0.04, 0.04, 0.04, 0.04];
        let m = 9;
        let n = 9;

        let x = 0;
        let y = 1;
        let z = 2;
        let u = 3;
        let v = 4;
        let loop = ((m * n) - ((n * 4) + ((m - 4) * 4)));
        let newImage = [];
        let trackIndex = [0, 1, 2, 3, 4];
        const table = document.getElementById('table');
        const table2 = document.getElementById('filter');
        const result = document.getElementById('result');
        for (let i = 0; i < loop; i++) {
            for (let i = 0; i < 20; i++) {
                let res = trackIndex[i] + n;
                trackIndex.push(res);
            }

            for (let i = 0; i < image.length; i++) {
                if (trackIndex[i] || trackIndex[i] == 0) {
                    let x = image[trackIndex[i]];
                    const tr = document.createElement('tr');
                    tr.innerHTML = `
                <td>${x}</td>
                `;
                    table.appendChild(tr);
                    newImage.push(x);
                }
            }

            let sum = 0;
            for (let i = 0; i < newImage.length; i++) {
                let result = newImage[i] * filter[i];
                sum += result;
            }
            const h4 = document.createElement('h4');
            const span = document.createElement('span');
            const span2 = document.createElement('span');
            h4.innerHTML = `Result = ${sum} <br>`;
            table.appendChild(h4);
            table.appendChild(span);
            table.appendChild(span2);
            for (let i = 0; i < 25; i++) {
                trackIndex.pop();
                newImage.pop();
            }
            x++;
            y++;
            z++;
            u++;
            v++;
            trackIndex.push(x);
            trackIndex.push(y);
            trackIndex.push(z);
            trackIndex.push(u);
            trackIndex.push(v);
            console.log(trackIndex);

            ///increment index
            if (z == 8 || z == 17 || z == 26 || z == 35 || z == 44) {
                x += 2;
                y += 2;
                z += 2;
            }

        }
    </script>
</body>

</html>